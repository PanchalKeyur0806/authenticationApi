# üîê Authentication API (JWT + Google OAuth)

A Node.js-based authentication API built with Express that supports:

- ‚úÖ JWT-based login and registration
- üåê Google OAuth2 login (via Passport.js)
- üîê Forgot/Reset password via email (Gmail SMTP)
- üõ°Ô∏è Protected routes using middleware

---

## üì¶ Tech Stack

- Node.js
- Express.js
- MongoDB + Mongoose
- Passport.js (Google OAuth)
- JSON Web Token (JWT)
- Nodemailer
- bcrypt
- express-session

---

## üß© Project Structure

```
authenticationApi/
‚îÇ
‚îú‚îÄ‚îÄ config/            # Passport config and email logic
‚îú‚îÄ‚îÄ controllers/       # Authentication and password controllers
‚îú‚îÄ‚îÄ models/            # User model
‚îú‚îÄ‚îÄ routes/            # Auth-related routes
‚îú‚îÄ‚îÄ middlewares/       # JWT protection middleware
‚îú‚îÄ‚îÄ utils/             # AppError, catchAsync, email utilities
‚îú‚îÄ‚îÄ .env               # Environment variables (not committed)
‚îú‚îÄ‚îÄ docker-compose.yml # Optional Docker setup
‚îî‚îÄ‚îÄ server.js          # App entry point
```

---

## ‚öôÔ∏è Installation

### üìÅ 1. Clone the Repository

```bash
git clone https://github.com/PanchalKeyur0806/authenticationApi.git
cd authenticationApi
```

### üì¶ 2. Install Dependencies

```bash
npm install
```

### üß™ 3. Set Up Environment Variables

Create a file named `.env` in the root of your project and copy the following configuration:

```env
# MongoDB Connection
MONGO_URL=mongodb://localhost:27017/Auth

# Server Port
PORT=5000

# JWT Settings
JWT_SECRET=your-app-secret
JWT_EXPIRES=1d

# Session Secret for Passport
SESSSION_SECRET=yoursecret

# Google OAuth 2.0
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
CALLBACK_URL=http://localhost:5000/auth/google/callback

# Gmail SMTP for Forgot Password
USER_EMAIL=your-email@gmail.com
GOOGLE_PASSWORD=your-app-password
```

> ‚ö†Ô∏è **Important:**
>
> - Use a Gmail **App Password**, not your real password
> - Never commit your `.env` file to GitHub
> - Use `.env.example` for sharing

---

## ‚ñ∂Ô∏è 4. Start the Server

```bash
npm start
```

Server runs on: [http://localhost:5000](http://localhost:5000)

---

## üîê API Endpoints

### üßæ Auth (JWT)

| Method | Route            | Description            |
| ------ | ---------------- | ---------------------- |
| POST   | `/auth/register` | Register a new user    |
| POST   | `/auth/login`    | Login with email & pwd |
| POST   | `/auth/logout`   | Logout (JWT blacklist) |
| GET    | `/auth/profile`  | Get user profile (JWT) |

### üåê Google OAuth

| Method | Route                   | Description              |
| ------ | ----------------------- | ------------------------ |
| GET    | `/auth/google`          | Start Google OAuth login |
| GET    | `/auth/google/callback` | Handle Google response   |

### üîÅ Forgot/Reset Password

| Method | Route                         | Description                   |
| ------ | ----------------------------- | ----------------------------- |
| POST   | `/auth/forgot-password`       | Send reset email              |
| POST   | `/auth/reset-password/:token` | Reset password via token link |

---

## üê≥ Docker Support (Optional)

If you use Docker:

1. Make sure Docker is installed
2. Update `.env` with:

```
MONGO_URL=mongodb://mongo:27017/Auth
```

3. Run with:

```bash
docker-compose up --build
```

---

## üìÑ `.env.example`

Share this with your team (create this file in your repo):

```env
MONGO_URL=mongodb://localhost:27017/Auth
PORT=5000

JWT_SECRET=your-app-secret
JWT_EXPIRES=1d

SESSSION_SECRET=yoursecret

GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
CALLBACK_URL=http://localhost:5000/auth/google/callback

USER_EMAIL=your-email@gmail.com
GOOGLE_PASSWORD=your-app-password
```

---

## üß™ Testing

- Test with Postman or Thunder Client
- Or visit [http://localhost:5000/auth/google](http://localhost:5000/auth/google) to test Google login

---

## üõ°Ô∏è Notes

- This API uses **Bearer Tokens** in the `Authorization` header
- Google login uses **Passport sessions**, and a JWT is returned after success
- Password reset uses Gmail SMTP; be sure to enable "App Passwords" in your Google account

---

## ü§ù Contributing

PRs and issues are welcome!

---

## üìú License

MIT ¬© 2025 [Keyur Panchal](https://github.com/PanchalKeyur0806)
